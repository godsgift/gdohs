<!DOCTYPE html>
<html lang="en">
 
<head>
    <title>Garage Door Opener and Poop Security</title>
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../static/styles.css">
</head>
	<body class="body">
        <nav class="navbar navbar-inverse">
            <ul class="nav navbar-nav">
                <li class="navbar-header">
                    <a class="navbar-brand" href="/">
                        <img alt="brand" src="../static/images/gdohs-logo.png">
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="/" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="/" class="nav-link">Home</a>
                </li>
            </ul>
        </nav>

		<div class="container">
            <div class="col-xs-6 col-xs-offset-3">
    			<h1 class="text-center text-white">Sign Up</h1>
    			<form id="signUp" method="POST" action="/signUp">
                <div class="row">
                    <div class="text-center">
                        <label for="Username">Username</label>
            			<input class="form-control" type="text" name="username" id="username" placeholder="Username" required autofocus><br>
                    </div>
                </div>
                <div class="row">
                    <div class="text-center text-white">
                        <label for="Password">Password</label>
                        <input class="form-control" type="password" name="password" id="password" placeholder="Password" required autofocus><br>
                    </div>
                </div>
                <div class="row">
                    <div class="text-center text-white">
                        <label for="Email">E-mail</label>
                        <input class="form-control" type="email" name="email" id="email" placeholder="E-mail" required><br>
                    </div>
                </div>
                <div class="row">
                    <div class="text-center text-white">
                        <label for="Firstname">First Name</label>
                        <input class="form-control" type="text" name="firstname" id="firstname" placeholder="First Name" required><br>
                    </div>
                </div>
                <div class="row">
                    <div class="text-center text-white">
                        <label for="Lastname">Last Name</label>
                        <input class="form-control" type="text" name="lastname" id="lastname" placeholder="Last Name" required><br>
                    </div>
                </div>
                <div class="row">
                    <div class="text-center">
                        <input type="submit" id="btnSignUp" class="btn-success btn-lg" value="Create Account">
                    </div>
                </div>
                </form>
            </div>
        </div>
    </body>
    <script src="../static/jquery.js"></script>
    <script type="text/javascript">

    $(document).ready(function() {
        var email = $("#email").val();

        //Disable spacebars
        $(function(){
          $('input').bind('input', function(){
            $(this).val(function(_, v){
              return v.replace(/\s+/g, '');
            });
          });
        });
        
        //Validates email address
        function isValidEmailAddress(emailAddress) {
            var pattern = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
            return pattern.test(emailAddress);
        };

        //Sends data to back-end on click
        $('#btnSignUp').click(function() {

            var emptyField = $("form :input").filter(function() {
                return $.trim(this.value).length === 0;
            }).length > 0;

            //if the field is not empty, check if the email is valid, if both are correct, send data
            if (!emptyField) {
                if(isValidEmailAddress(email)) {
                    $("#signUp").submit();
                }  
            }
        });
            
    	// $('#btnSignUp').click(function() {
    	// 	$.ajax({
    	// 		url: '/signUp',
    	// 		data: $('form').serialize(),
    	// 		type: 'POST',
     //            dataType:'html',
    	// 		success: function(response) {
    	// 			console.log(response);
    	// 		},
    	// 		error: function(error) {
    	// 			console.log(error);
    	// 		}
    	// 	});
    	// });
    });
    </script>
</html>

